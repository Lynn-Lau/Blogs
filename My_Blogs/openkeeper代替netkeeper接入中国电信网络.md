### openkeeper代替netkeeper接入中国电信网络

重庆各大高校的宽带服务都是高校和中国电信合作，垄断了校园的宽带服务，中国电信的拨号上网的客户端在Windows和Mac下是netkeeper，唯独缺少Linux环境下的拨号终端。作为程序员或者必要的使用Linux开发的同学，在Linux环境下却没有netkeeper，那么如何接入网络呢？
一些Linux爱好者的前辈们开发出了了openkeeper拨号软件，确实造福了一批又一批的学子，网上也有一些有关的使用配置教程，但是却存在着一些问题。比如，随着Linux内核版本的更新，配置步骤发生了小小的变化，或者有些步骤模糊不清楚，导致后面的同学们走了不少的弯路（也包括我自己），所以我想自己再更新一个版本的教程，图文均有的教程，让大家少走弯路。
闲言少叙，马上开始。

> **本次openkeeper安装使用的内核是Linux Kernel4.4，Ubuntu 16.04 LTS，openkeeper版本以及文件为openkeeper-cli-1.1.bz2** 。[我在这儿](http://pan.baidu.com/s/1b2n9lc )，提取码nufn。

具体操作如下：

- 安装完成Ubuntu首先配置接入网络，Ctrl+Alt+T 呼出终端，切换到下载好的openkeeper目录下面，将已经下载好的openkeeper进行解压；

  ```shell
  tar -jxv -f openkeeper-cli-1.1.tar.bz2 # 解压压缩文件，输入文件名的时候可使用Tab键自动补全
  ```

- cd 切换到已经解压的目录，安装必要的依赖文件；

  ```shell
  cd openkeeper-cli-1.1 #进入目录
  ls
  32 64 build-essential_11.ubuntu4_amd64.deb README
  ```

  在这里需要安装essential依赖文件，扩展名为.deb的文件，因为部分版本的Linux可能没有安装文件安装包管理器，所以推荐使用命令行进行安装。

  ```shell
  sudo dpkg -i build-essential_11,ubuntu4_amd64.deb #安装essential，同样可以使用Tab键补全文件名字
  ```

- 安装essential结束之后，根据自己系统的版本选择32/64，本机使用的64，所以cd切换到64的文件夹下面，安装openkeeper；

  ```shell
  cd 64
  sudo ./install.sh #安装shell文件，其实就是把openkeeper的各个脚本命令安装到Ubuntu中
  ```

  在这里有一个特别需要注意的地方，如上面的命令行中直接使用`sudo`进行安装的时候，可能会出现“找不到命令”这样的错误，多次重复之后或者使用root账户安装还是出现这样的问题，不要慌，通过鼠标切换到该文件夹下面，找到该文件，右击，在弹出的菜单中，将该文件的权限切换为可执行的文件即可。再使用命令行的命令去执行的之后，便可以顺利安装。

  那么，安装结束之后，该拨号软件安装在哪个目录下面了呢？就是/usr/bin目录下面。

- 配置openkeeper的帐号和密码；

  进行到这一步，openkeeper基本已经安装完成了，下面就是配置帐号和密码拨号上网了，想想有点小激动呢：）cd切换到/usr/bin目录下面

  ```shell
  cd /usr/bin
  sudo ok-config #打开本文件，进行帐号和密码以及添加网卡设置
  ```

  输入帐号和密码没有什么可以介绍的，例如重庆邮电大学帐号：12345678@cqupt，密码：xxxx。关键是在添加网开的时候，出现错误。这里添加网卡，添加的是有线网卡适配器，不是网关，很多小伙伴把自己有线网的网关输入进去了，172.12.22.1。这些是错误，那么应该如何正确的添加网卡呢？再打开另外一个新的终端，输入`ifconfig`查看自己的网络配置。如下：

  ```shell
  enp7s0    Link encap:以太网  硬件地址 x8:x0:x4:x8:x8:xd  
            inet 地址:192.168.1.89  广播:192.168.1.255  掩码:255.255.255.0
            inet6 地址: fe80::cc30:2975:b8a6:7384/64 Scope:Link
            UP BROADCAST RUNNING MULTICAST  MTU:1500  跃点数:1
            接收数据包:42774 错误:0 丢弃:0 过载:0 帧数:0
            发送数据包:38628 错误:0 丢弃:0 过载:0 载波:1
            碰撞:0 发送队列长度:1000 
            接收字节:32482673 (32.4 MB)  发送字节:5489606 (5.4 MB)

  lo        Link encap:本地环回  
            inet 地址:127.0.0.1  掩码:255.0.0.0
            inet6 地址: ::1/128 Scope:Host
            UP LOOPBACK RUNNING  MTU:65536  跃点数:1
            接收数据包:8 错误:0 丢弃:0 过载:0 帧数:0
            发送数据包:8 错误:0 丢弃:0 过载:0 载波:0
            碰撞:0 发送队列长度:1 
            接收字节:436 (436.0 B)  发送字节:436 (436.0 B)
  ```

  其中，第一段就是你的以太网的网卡，后面是详细的信息，包括你的IP地址，网络掩码之类的，在ok-config添加网卡的时候，需要将`enp7s0`添加进去就可以。到此，拨号网络的配置结束。

- 拨号入网；

  在配置结束之后，就是拨号入网了，使用的命令就是

  ```shell
  sudo okok
  ```

  登录成功便可以愉快的上网了。断开网络

  ```shell
  sudo okok-stop
  ```

至此，Ubuntu下的openkeeper的配置过程算结束了。

